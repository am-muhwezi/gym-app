Watching for file changes with StatReloader
Not Found: /api/clients/
[11/Nov/2025 03:24:03] "GET /api/clients/ HTTP/1.1" 404 2967
/home/m/work/gym-app/server/gymapp/urls.py changed, reloading.
Performing system checks...

System check identified no issues (0 silenced).
November 11, 2025 - 03:21:41
Django version 5.2.8, using settings 'gymapp.settings'
Starting development server at http://0.0.0.0:8000/
Quit the server with CONTROL-C.

WARNING: This is a development server. Do not use it in a production setting. Use a production WSGI or ASGI server instead.
For more information on production servers see: https://docs.djangoproject.com/en/5.2/howto/deployment/
Watching for file changes with StatReloader
[11/Nov/2025 03:24:35] "GET /api/clients/ HTTP/1.1" 200 2
[11/Nov/2025 03:24:59] "POST /api/clients/ HTTP/1.1" 201 315
[11/Nov/2025 03:24:59] "POST /api/clients/ HTTP/1.1" 201 321
[11/Nov/2025 03:24:59] "GET /api/clients/ HTTP/1.1" 200 373
[11/Nov/2025 03:24:59] "GET /api/clients/?trainer_id=1 HTTP/1.1" 200 184
[11/Nov/2025 03:24:59] "GET /api/clients/?trainer_id=2 HTTP/1.1" 200 190
Internal Server Error: /api/clients/statistics/
Traceback (most recent call last):
  File "/home/m/work/gym-app/.venv/lib/python3.13/site-packages/django/db/models/fields/__init__.py", line 2128, in get_prep_value
    return int(value)
  File "/home/m/work/gym-app/.venv/lib/python3.13/site-packages/django/contrib/auth/models.py", line 549, in __int__
    raise TypeError(
    ...<2 lines>...
    )
TypeError: Cannot cast AnonymousUser to int. Are you trying to use it in place of User?

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/m/work/gym-app/.venv/lib/python3.13/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
  File "/home/m/work/gym-app/.venv/lib/python3.13/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/home/m/work/gym-app/.venv/lib/python3.13/site-packages/django/views/decorators/csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
  File "/home/m/work/gym-app/.venv/lib/python3.13/site-packages/rest_framework/viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
           ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m/work/gym-app/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 515, in dispatch
    response = self.handle_exception(exc)
  File "/home/m/work/gym-app/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 475, in handle_exception
    self.raise_uncaught_exception(exc)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "/home/m/work/gym-app/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 486, in raise_uncaught_exception
    raise exc
  File "/home/m/work/gym-app/.venv/lib/python3.13/site-packages/rest_framework/views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
  File "/home/m/work/gym-app/server/clients/views.py", line 235, in statistics
    stats = ClientService.get_client_statistics(request.user)
  File "/home/m/work/gym-app/server/clients/services.py", line 132, in get_client_statistics
    clients = Client.objects.filter(trainer=trainer)
  File "/home/m/work/gym-app/.venv/lib/python3.13/site-packages/django/db/models/manager.py", line 87, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/home/m/work/gym-app/.venv/lib/python3.13/site-packages/django/db/models/query.py", line 1495, in filter
    return self._filter_or_exclude(False, args, kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "/home/m/work/gym-app/.venv/lib/python3.13/site-packages/django/db/models/query.py", line 1513, in _filter_or_exclude
    clone._filter_or_exclude_inplace(negate, args, kwargs)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m/work/gym-app/.venv/lib/python3.13/site-packages/django/db/models/query.py", line 1523, in _filter_or_exclude_inplace
    self._query.add_q(Q(*args, **kwargs))
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/m/work/gym-app/.venv/lib/python3.13/site-packages/django/db/models/sql/query.py", line 1646, in add_q
    clause, _ = self._add_q(q_object, can_reuse)
                ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "/home/m/work/gym-app/.venv/lib/python3.13/site-packages/django/db/models/sql/query.py", line 1678, in _add_q
    child_clause, needed_inner = self.build_filter(
                                 ~~~~~~~~~~~~~~~~~^
        child,
        ^^^^^^
    ...<7 lines>...
        update_join_types=update_join_types,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/m/work/gym-app/.venv/lib/python3.13/site-packages/django/db/models/sql/query.py", line 1588, in build_filter
    condition = self.build_lookup(lookups, col, value)
  File "/home/m/work/gym-app/.venv/lib/python3.13/site-packages/django/db/models/sql/query.py", line 1415, in build_lookup
    lookup = lookup_class(lhs, rhs)
  File "/home/m/work/gym-app/.venv/lib/python3.13/site-packages/django/db/models/lookups.py", line 38, in __init__
    self.rhs = self.get_prep_lookup()
               ~~~~~~~~~~~~~~~~~~~~^^
  File "/home/m/work/gym-app/.venv/lib/python3.13/site-packages/django/db/models/fields/related_lookups.py", line 112, in get_prep_lookup
    self.rhs = target_field.get_prep_value(self.rhs)
               ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "/home/m/work/gym-app/.venv/lib/python3.13/site-packages/django/db/models/fields/__init__.py", line 2130, in get_prep_value
    raise e.__class__(
        "Field '%s' expected a number but got %r." % (self.name, value),
    ) from e
TypeError: Field 'id' expected a number but got <django.contrib.auth.models.AnonymousUser object at 0x7fd06b5c74d0>.
[11/Nov/2025 03:24:59] "GET /api/clients/statistics/ HTTP/1.1" 500 162508
[11/Nov/2025 03:32:22] "OPTIONS /api/clients/ HTTP/1.1" 200 0
[11/Nov/2025 03:32:22] "GET /api/clients/ HTTP/1.1" 200 373
[11/Nov/2025 03:32:23] "GET /api/clients/ HTTP/1.1" 200 373
[11/Nov/2025 03:33:05] "GET /api/clients/ HTTP/1.1" 200 373
[11/Nov/2025 03:33:05] "GET /api/clients/ HTTP/1.1" 200 373
[11/Nov/2025 03:33:06] "GET /api/clients/ HTTP/1.1" 200 373
[11/Nov/2025 03:33:06] "GET /api/clients/ HTTP/1.1" 200 373
[11/Nov/2025 03:33:14] "GET /api/clients/ HTTP/1.1" 200 373
[11/Nov/2025 03:33:14] "GET /api/clients/ HTTP/1.1" 200 373
[11/Nov/2025 03:33:30] "GET /api/clients/ HTTP/1.1" 200 373
[11/Nov/2025 03:33:30] "GET /api/clients/ HTTP/1.1" 200 373
[11/Nov/2025 03:33:39] "GET /api/clients/ HTTP/1.1" 200 373
[11/Nov/2025 03:33:39] "GET /api/clients/ HTTP/1.1" 200 373
[11/Nov/2025 03:33:47] "GET /api/clients/ HTTP/1.1" 200 373
[11/Nov/2025 03:33:48] "GET /api/clients/ HTTP/1.1" 200 373
[11/Nov/2025 03:38:49] "GET /api/clients/ HTTP/1.1" 200 373
[11/Nov/2025 03:42:13] "POST /api/clients/ HTTP/1.1" 201 310
[11/Nov/2025 03:42:13] "GET /api/clients/ HTTP/1.1" 200 551
